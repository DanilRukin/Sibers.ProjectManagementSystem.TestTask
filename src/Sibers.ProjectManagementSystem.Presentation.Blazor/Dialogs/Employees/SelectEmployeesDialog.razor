@using Sibers.ProjectManagementSystem.Presentation.Blazor.Infrastructure.Dtos;
@using Sibers.ProjectManagementSystem.Presentation.Blazor.Infrastructure.ViewModels;
<MudDialog>
    <DialogContent>
        <MudContainer>
            @if (EmployeesList == null)
            {
                <MudProgressCircular Color="Color.Default" Indeterminate="true" />
            }
            else
            {
                @if (!Multiselection)
                {
                    <MudText GutterBottom="true" Typo="Typo.h5">
                        Выбранный сотрудник:  @_selectedEmployee?.FirstName @_selectedEmployee?.LastName @_selectedEmployee?.Patronymic
                    </MudText>
                }
                <MudTable Style="height:stretch;" Items="EmployeesList" FixedHeader="true" FixedFooter="true" Height="400px"
                      Hover="true" SortLabel="Sort by" MultiSelection="Multiselection"
                      @bind-SelectedItems="_selectedEmployees" @bind-SelectedItem="_selectedEmployee">
                    <HeaderContent>
                        <MudTh>
                            <MudTableSortLabel SortBy="new Func<EmployeeViewModel, object>(e => e.FirstName)">
                                Фамилия
                            </MudTableSortLabel>
                        </MudTh>
                        <MudTh>
                            <MudTableSortLabel SortBy="new Func<EmployeeViewModel, object>(e => e.LastName)">
                                Имя
                            </MudTableSortLabel>
                        </MudTh>
                        <MudTh>
                            <MudTableSortLabel SortBy="new Func<EmployeeViewModel, object>(e => e.Patronymic)">
                                Отчество
                            </MudTableSortLabel>
                        </MudTh>
                        <MudTh>
                            <MudTableSortLabel SortBy="new Func<EmployeeViewModel, object>(e => e.Email)">
                                Email
                            </MudTableSortLabel>
                        </MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Фамилия">@context.FirstName</MudTd>
                        <MudTd DataLabel="Имя">@context.LastName</MudTd>
                        <MudTd DataLabel="Отчество">@context.Patronymic</MudTd>
                        <MudTd DataLabel="Email">@context.Email</MudTd>
                    </RowTemplate>
                    <PagerContent>
                        <MudTablePager PageSizeOptions="new int[] { 10, 25, 50, 100 }" />
                    </PagerContent>
                </MudTable>
            }
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Submit">Выбрать</MudButton>
    </DialogActions>
</MudDialog>
